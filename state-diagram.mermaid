stateDiagram-v2
    [*] --> 初期化: システム起動
    初期化 --> アイドル: 初期設定完了
    
    アイドル: 待機状態
    アイドル: - LEDは通常モード（白色）
    アイドル: - 人感センサー監視中
    
    接近検知: 人が近づいた状態
    接近検知: - 距離に応じて反応
    接近検知: - 挨拶を生成
    
    会話中: アクティブ会話状態
    会話中: - 感情に応じたLED表示
    会話中: - 口パク表現
    会話中: - 会話履歴記録
    
    独り言: 定期発話状態
    独り言: - ランダムトピック
    独り言: - または最新ニュース
    
    ニュース更新: バックグラウンド処理
    ニュース更新: - 6時間ごとに実行
    ニュース更新: - NewsAPIから取得

    アイドル --> 接近検知: 人が150cm以内に接近
    接近検知 --> 会話中: 挨拶発話完了
    会話中 --> 会話中: 人が50cm以内に接近
    会話中 --> アイドル: 30秒間やり取りなし
    アイドル --> 独り言: 10分間無反応
    独り言 --> アイドル: 発話完了
    
    アイドル --> ニュース更新: スケジュール実行時間
    ニュース更新 --> アイドル: ニュース取得完了
    
    会話中 --> [*]: システム終了
    アイドル --> [*]: システム終了
    
    note right of アイドル
        超音波センサーで常に
        距離を測定中
    end note
    
    note right of 会話中
        距離・経過時間により
        話題の選択が変化
    end note
    
    note left of ニュース更新
        NewsAPIから
        最新ニュースを取得
    end note
